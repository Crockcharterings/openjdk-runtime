# Cloud Builder pipeline for running integration tests
# https://cloud.google.com/container-builder/docs/overview
steps:
  # Runtimes-common integration tests
  # See https://github.com/GoogleCloudPlatform/runtimes-common/tree/master/integration_tests

  # temporarily we'll depend on our own version until the runtimes-common version is pushed
  #  - name: 'gcr.io/gcp-runtimes/integration_test'
  - name: 'gcr.io/java-runtime-test/integration-test'
    args:
      - '--url=${_DEPLOYED_APP_URL}'
      - '--skip-custom-tests'
      - '--skip-monitoring-tests'
#      - '--skip-standard-logging-tests' # this will only work in cloud settings.
      - '--skip-exception-tests'
      - '--skip-custom-logging-tests'
      - '--verbose'

